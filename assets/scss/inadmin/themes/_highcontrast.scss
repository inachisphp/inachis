@use '../definitions' as *;
@use 'sass:color';

@mixin high-contrast-theme {
/* Primitives - Neutrals (Extreme Contrast) */
    --color-neutral-000: #000000; /* Pure Black Background */
    --color-neutral-050: #000000;
    --color-neutral-100: #000000;
    --color-neutral-200: #1a1a1a; /* Very dark surface for distinction */
    --color-neutral-250: #ffffff; /* Borders must be white/bright */
    --color-neutral-300: #ffffff;
    --color-neutral-400: #ffffff;
    --color-neutral-500: #ffffff;
    --color-neutral-600: #ffffff;
    --color-neutral-700: #ffffff; /* All text becomes white */
    --color-neutral-800: #ffffff;
    --color-neutral-900: #ffffff;

    /* Primitives - Brand (High Luminance) */
    --color-brand-400: #00ffff; /* Cyan (High contrast on black) */
    --color-brand-500: #ffff00; /* Pure Yellow (Extreme visibility) */
    --color-brand-600: #ffff00;

    --color-accent-500: #ffffff;

    /* Semantic - Neon Tones for AAA */
    --color-success-500: #00ff00; /* Pure Green */
    --color-danger-500: #ff5555;  /* Bright Red */
    --color-warning-500: #ffff00; /* Pure Yellow */
    --color-info-500: #00ffff;

    /* Custom HC Variables */
    --hc-focus-outline: 3px solid #ffff00;

  .EasyMDEContainer {
    /* AAA Requirement: Text must be high contrast */
    .CodeMirror {
      background: var(--color-neutral-000) !important;
      color: #ffffff !important;
      border: 2px solid #ffffff !important; /* Thicker borders */
    }

    /* AAA Requirement: Focus must be unmistakable */
    .CodeMirror-focused {
      outline: var(--hc-focus-outline) !important;
      outline-offset: 2px;
    }

    /* AAA Requirement: Selection needs strong contrast */
    .CodeMirror-selected {
      background: #ffffff !important;
      color: #000000 !important; /* Invert text in selection */
    }

    /* -----------------------------------------
     Syntax - Using High Luminance Colors
    --------------------------------------------- */
    .cm-header { color: var(--color-brand-500) !important; font-weight: 900; }
    .cm-strong { color: #ffffff !important; text-decoration: underline; }
    .cm-em { color: #ffffff !important; font-style: italic; border-bottom: 1px dashed; }
    .cm-link { color: var(--color-brand-400) !important; text-decoration: underline; }

    /* Fixed your syntax error from the original file */
    .cm-variable-2 { color: var(--color-warning-500) !important; }
    .cm-tag { color: var(--color-brand-400) !important; }

    /* -----------------------------------------
     Toolbar - AAA (No subtle hovers)
    --------------------------------------------- */
    .editor-toolbar {
      background: #000000 !important;
      border: 2px solid #ffffff !important;

      button {
        color: #ffffff !important;
        opacity: 1 !important;
        border: 1px solid transparent;

        &:hover {
          background: #ffffff !important;
          color: #000000 !important;
          border-color: #ffffff !important;
        }

        &.active {
          background: var(--color-brand-500) !important;
          color: #000000 !important;
          outline: 2px solid #ffffff;
        }
      }
    }
  }
}

.theme-contrast {
    @include high-contrast-theme();
}

@media (prefers-contrast: more) {
	body {
		@include high-contrast-theme();
	}
}
