{% extends "inadmin/structure/main.html.twig" %}

{% block pagetitle %}
    <span>{{ page.tab|title }}s</span>
{% endblock pagetitle %}

{% block content %}
    {% set badges = {
        draft: {
            field: 'status',
            condition: 'draft',
            className: 'badge__draft',
        },
        scheduled: {
            field: 'isScheduledPage',
            condition: true,
            className: 'badge__scheduled',
        },
        private: {
            field: 'visibility',
            condition: false,
            className: 'badge__private',
        },
        issue: {
            context: 'slug_object',
            condition: '',
            className: 'badge__issue',
        },

    } %}
    {% if app.request.server.get('WARN_HOTLINKED_IMAGES_ENABLED')|default('0') == '1' %}
        {% set badges = badges|merge({
            'hot-linked-images': {
                'field': 'hasHotlinkedImages',
                'condition': true,
                'className': 'badge__hotlink'
            }
        }) %}
    {% endif %}

    {% block post_list_pre %}{% endblock post_list_pre %}

    {% block post_list %}
        {% set link_new = path('incc_post_edit', {'type': 'post'}) ~ '/post/new' %}
        {% if page.tab == 'page' %}
            {% set link_new = path('incc_post_edit', {'type': 'page'}) ~ '/new' %}
        {% endif %}

        <div class="col span_8_of_8 widget-posts ui-tabs-external">
            {% include 'inadmin/partials/tab-sets/posts.html.twig' %}
            {% include 'inadmin/partials/list.html.twig' with {
                'className': 'form__posts',
                'type': 'post',
                'dataset': posts,

                'offset': query.offset,
                'limit': query.limit,
                'total': posts.count,

                'snippet_description': 'content',
                'slug_prefix': page.tab,
                'slug': 'urls[0].link',

                'add_button': {
                    'text': 'Create ' ~ page.tab|capitalize,
                    'url': link_new,
                },
                'url_result': path('incc_post_list'),

                'badges': badges,

                'actions': {
                    'private': {
                        'button_class': 'button--secondary button--privacy',
                        'data': {
                            'form-action': ''
                        },
                        'icon': 'visibility_off',
                        'title': 'Make private',
                    },
                    'public': {
                        'button_class': 'button--secondary button--privacy',
                        'data': {
                            'form-action': ''
                        },
                        'icon': 'visibility',
                        'title': 'Make public',
                    },
                    'rebuild': {
                        'button_class': 'button--secondary',
                        'data': {
                            'form-action': ''
                        },
                        'icon': 'hub',
                        'title': 'Recreate Link'
                    },
                    'export': {
                        'button_class': 'button--secondary button--export dialog__link',
                        'button_type': 'button',
                        'data': {
                            'class-name': 'dialog__export',
                            'form-action': '',
                            'template-name': 'export',
                            'title': 'Export content'
                        },
                        'icon': 'cloud_download',
                        'title': 'Export'
                    },
                    'delete': {
                        'button_class': 'button--negative button--delete button--confirm',
                        'data': {
                            'entity': 'posts',
                            'form-action': '',
                            'title': 'all selected items',
                            'warning': 'All currently selected content will be deleted permanently. This action cannot be undone.',
                        },
                        'icon': 'delete_forever',
                        'title': 'Delete',
                    }
                },

                'filters': {
                    'Status': {
                        '': 'All',
                        'draft': 'Draft',
                        'published': 'Published',
                    },
                    'Visibility': {
                        '': 'All',
                        'private': 'Private',
                        'public': 'Public',
                    }
                },

                'filter_values': query.filters,

                'sort_options': {
                    'postDate asc': 'Published: Oldest',
                    'postDate desc': 'Published: Newest',
                    'modDate asc': 'Modified: Oldest',
                    'modDate desc': 'Modified: Newest',
                    'title asc': 'Title: A-Z',
                    'title desc': 'Title: Z-A',
                },

                'show_select_deselect': true,
                'show_search': true,
                showSummary: true,
                'zebra': true,
            }
            %}

        </div>
    {% endblock post_list %}

    {% block post_list_post %}{% endblock post_list_post %}
{% endblock content %}






