{% block javascript_bottom %}
{%- if is_granted('ROLE_USER') %}
    {% if includeEditor|default(false) %}
    <script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
        {% if editorHighlighting|default(false) %}
    <script src="https://cdn.jsdelivr.net/highlight.js/latest/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/latest/styles/github.min.css">
        {% endif %}
    <script>
        let easymde = new EasyMDE({
            element: document.querySelector('.mde_editor'),
            autosave: {
                enabled: true,
                uniqueId: '{% if includeEditorId|default(null) is not empty %}{{ includeEditorId }}{% else %}new-content-{{ session.id }}-{{ date()|date('Ymd') }}{% endif %}'
            },
        {% if editorHighlighting|default(false) %}
            codeSyntaxHighlighting: true,
        {% endif %}
            forceSync: true
        });
        {% if app.session.get('clearAutosave')|default(false) %}
        easymde.clearAutosavedValue();
            {{ app.session.set('clearAutosave', false) }}
        {% endif %}
    </script>
    {% endif %}
    <script>
        window.Inachis.SessionTimeout.init({
            sessionTimeout: {{ session_timeout|default(1440) }},
            sessionEndTime: '{{ session_timeout_time }}Z',
            templateEncoded: '{{ timeout_template }}',
        });
    </script>
{% endif %}
{% endblock javascript_bottom %}
