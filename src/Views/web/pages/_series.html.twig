{% extends "web/structure/main.html.twig" %}

{% set pageClass = 'series' %}
{% set showReadProgress = true %}

{% block content %}

    <div class="content-column">

            {% if series is defined %}
                <article class="post format-standard hentry" id="series-{{ series.id }}">
                    <header class="entry-header">
                        <h1 class="entry-title">{{ series.title }}</h1>
                        {%- if series.subTitle is not empty %}
                            <h2 class="entry-subtitle">{{ series.subTitle }}</h2>
                        {% endif %}
                    </header>

                    <div class="entry-content">
                        {{ series.description|default('')|markdown }}

                        {% if series.image.filename|default('') is not empty %}
                        <p><img alt="{{ series.image.altText }}" class="align_centre" src="{% if not (series.image.filename starts with 'http') %}/imgs/{% endif %}{{ series.image.filename }}" /></p>
                        {% endif %}

                        {% if series.items is not empty %}
                        <p><strong>Contents</strong></p>
                        <ul>
                            {% for item in series.items %}
                                {% set title = (item.title|replace({ (series.title): '' })) ?: item.title %}
                                {% if item.status == 'published' and item.postDate|date('U') < 'now'|date('U') %}
                            <li>
                                {% if item.subTitle is not empty %}{{ title }} - {% endif %}
                                <a href="{{ item.urls|first.link }}">{% if item.subTitle is empty %}{{ title }}{% else %}{{ item.subTitle }}{% endif %}</a>
                            </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </article>
            {% endif %}

    </div>

{% endblock content %}
